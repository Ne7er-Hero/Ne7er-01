# check_connection.yml
- name: Check SSH connection status
  hosts: all
  gather_facts: no
  tasks:

    - name: Test connection with ping module
      ansible.builtin.ping:
      register: ping_result
      ignore_errors: true

    - name: Show success message
      debug:
        msg: "✅ {{ inventory_hostname }} ({{ ansible_user | default('N/A') }}) connected successfully"
      when: ping_result is succeeded

    - name: Show failure message
      debug:
        msg: "❌ {{ inventory_hostname }} ({{ ansible_user | default('N/A') }}) failed to connect"
      when: ping_result is failed



[all]
192.168.1.10 ansible_user=test1 ansible_ssh_pass=pass1
192.168.1.11 ansible_user=test2 ansible_ssh_pass=pass2
